<!DOCTYPE html>
<html lang="uk">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Theme Switcher</title>
    <link rel="stylesheet" href="../css/day-night.css" />
  </head>

  <body>
    <span class="icon emoji">‚≠ê</span>
    <div class="theme-switcher">
      <input type="checkbox" id="toggle" />
      <label for="toggle" class="switch">
        <span class="icon sun">üåû</span>
        <span class="icon moon">üåô</span>
        <span class="blob"></span>
      </label>
    </div>
    <span class="icon stars">‚ú®</span>

    <script>
      // 	const emoji =  "üåû";
      // console.log(emoji.codePointAt(0).toString(16));
      // –í–∏–≤–µ–¥–µ '2600' –¥–ª—è ‚òÄ
      const one_time_star = document.querySelector('.emoji');

      const my_star = document.querySelector('.stars');
      const toggle = document.getElementById('toggle');
      const blob = document.querySelector('.blob');

      toggle.addEventListener('change', () => {
        if (toggle.checked) {
          blob.style.transform = 'translateX(76px)'; // —Ä—É—Ö +
          document.body.style.background = '#1a1a2e'; // –Ω—ñ—á–Ω–∞ —Ç–µ–º–∞
          my_star.style.display = 'block'; // –ø–æ–∫–∞–∑–∞—Ç–∏ div
        } else {
          blob.style.transform = 'translateX(0)'; // –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ —Å–æ–Ω—Ü—è
          document.body.style.background = '#e0f0ff'; // –¥–µ–Ω–Ω–∞ —Ç–µ–º–∞
          my_star.style.display = 'none'; // —Å—Ö–æ–≤–∞—Ç–∏ div

          
        //  –ê–Ω—ñ–º–∞—Ü—ñ—è –∑—ñ—Ä–∫–∏
          document.addEventListener('click', () => {
            let start = null;
            let opacity = 1;
            const duration =2000; // —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å (–º—Å)
            const startX = 0,
              endX = 150;
            const startY = 0,
              endY = 450;
            const startScale = 1,
              endScale = 20;

            // easing-—Ñ—É–Ω–∫—Ü—ñ—è bounce
            function easeOutBounce(t) {
              if (t < 1 / 2.75) {
                return 7.5625 * t * t;
              } else if (t < 2 / 2.75) {
                return 7.5625 * (t -= 1.5 / 2.75) * t + 0.75;
              } else if (t < 2.5 / 2.75) {
                return 7.5625 * (t -= 2.25 / 2.75) * t + 0.9375;
              } else {
                return 7.5625 * (t -= 2.625 / 2.75) * t + 0.984375;
              }
            }

            function animate(time) {
              if (!start) start = time;
              let progress = (time - start) / duration;
              if (progress > 1) progress = 1;

              // –∑–∞—Å—Ç–æ—Å–æ–≤—É—î–º–æ bounce
              let ease = easeOutBounce(progress);

              let x = startX + (endX - startX) * ease;
              let y = startY + (endY - startY) * ease;
              let s = startScale + (endScale - startScale) * ease;
              let angle = progress * -240;

              // –ø–æ—Å—Ç—É–ø–æ–≤–æ –∑–º–µ–Ω—à—É—î–º–æ opacity
              opacity = 1 - progress;

              one_time_star.style.transform = `translateX(${x}px) translateY(${y}px) rotate(${angle}deg) scale(${s})`;
              one_time_star.style.opacity = opacity;

              if (progress < 1) {
                requestAnimationFrame(animate);
              } else {
                // one_time_star.style.display = 'none'; 
              }
            }
            requestAnimationFrame(animate);
          });
        }
      });
    </script>
  </body>
</html>
